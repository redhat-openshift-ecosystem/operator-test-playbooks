---

- debug:
    var: an_item  

- name: "Getting content of '{{ an_item }}' file"
  shell: "cat {{ an_item }}"
  register: annotation_data

- name: "Sets `annotations_vars` from yaml file"
  set_fact:
    annotations_vars: "{{ annotation_data.stdout | from_yaml }}"
- name: "Sets `annotations_vars` from yaml file"
  set_fact:
    op_label: "{{ annotations_vars.annotations['com.redhat.openshift.versions'] | default('')}}"

- debug:
    msg: "{{ an_item.split('/')[-3] }}"

- debug:
    msg: "{{ an_item.split('/')[-3] }}"
  when:
    - op_label | length > 0
    - op_label is search("=v4.6") or op_label is search("-v4.6") 

