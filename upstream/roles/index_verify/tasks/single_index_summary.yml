---
- name: "Print"
  ansible.builtin.debug:
    var: iv_index_operator_ana[iv_index_item]

- name: "Create header"
  block:
    - name: "Test"
      ansible.builtin.lineinfile:
        # create: true
        path: "{{ iv_output_file }}"
        line: "| operator | {{ '[ %10s ]' | format(iv_indexes_versions | join(',')) }} | OK |"

    - name: "Test"
      ansible.builtin.lineinfile:
        # create: true
        path: "{{ iv_output_file }}"
        line: "| --- | --- | --- |"
  when: ansible_loop.index == 1

- name: "Test"
  ansible.builtin.lineinfile:
    # create: true
    path: "{{ iv_output_file }}"
    line: "| {{ '%50s' | format(iv_index_item)  }} | {{ '[ %10s ]' | format(iv_index_operator_ana[iv_index_item].versions | join(',')) }} | {{ '%5s' | format(iv_index_operator_ana[iv_index_item].valid|bool and iv_indexes | length == iv_index_operator_ana[iv_index_item].size) }} | "

- name: "Parsing operator versions"
  set_fact:
    iv_operators_failed: "{{ iv_operators_failed | default([]) + [ iv_index_item ] }}"
  when: not (iv_index_operator_ana[iv_index_item].valid|bool and iv_indexes | length == iv_index_operator_ana[iv_index_item].size)

