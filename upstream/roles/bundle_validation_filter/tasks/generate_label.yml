---
- name: "Fail if 'bvf_versions' is not defined"
  fail:
    msg: "Variable 'bvf_versions' is undefined. Please run bundle_validate_filter with 'validate_api=true'"
  when: bvf_versions is undefined

- name: "Reset"
  set_fact:
    label_set: false

- name: ""
  block:

# convert .split('.')
# fill to dictionry 47:4.7
# find max and min
    - name: ""
      include_tasks: parse_cluster_versions.yml
      loop: "{{ k8s2ocp.keys() }}"
      loop_control:
        loop_var: pcv_cluster
      when: cluster_type == "k8s"

    - name: ""
      include_tasks: parse_cluster_versions.yml
      loop: "{{ ocp2k8s.keys() }}"
      loop_control:
        loop_var: pcv_cluster
      when: cluster_type == "ocp"

    - name: ""
      set_fact:
        bvf_label: "v{{ bvf_versions[0] }}-v{{ bvf_versions[-1] }}"
      when: cluster_type|count >= 2
    - name: ""
      set_fact:
        label_set: true
      when: cluster_type|count >= 2

  when: cluster_type|length != 0

- name: ""
  debug:
    msg: "Operator version not valid for any cluster, not generating any cluster version label"
  when: cluster_type|length == 0

- debug:
    var:
      bvf_label