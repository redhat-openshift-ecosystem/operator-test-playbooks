---
- name: "#2 SEMVER veneer"
  block:
    - name: "Set olm.package"
      ansible.builtin.set_fact:
        olm_package:
          schema: olm.package
          name: "{{ gv_package_name }}"
          defaultChannel: NOT-DETECTED

   # - name: "Prepare list od valid bundles for {{ gv_index }} needed for 'entries' and 'olm.bundle'" NETREBA

    - name: "Loop channels"
      include_tasks: olm_channel_loop_channels.yml
      loop: "{{ op_info[gv_package_name].channels.keys() }}"
      loop_control: 
        loop_var: gv_channel

    # - name: "Loop over bundles"

# - name: "Include file list"
#   include_vars:
#     file: "defaults/concatenate_list.yml"
#     name: files

# - name: "Concatenate"
#   ansible.builtin.template:
#     src: templates/concatenate.j2
#     dest: "{{ gv_veneer_output }}"

  when: op_info[gv_package_name].mode == "replaces"
