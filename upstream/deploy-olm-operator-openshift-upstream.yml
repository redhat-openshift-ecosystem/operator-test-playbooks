---
- name: Deploy on OCP
  hosts: all
  become: false
  gather_facts: false

  tasks:
    - name: "Set variable 'no_log' to shorten prow verbose output"
      set_fact:
        prow_verbosity: false

    - name: "Load operator info from file"
      include_role:
        name: operator_info_load
      vars:
        operator_info_file: "/tmp/op_info.yaml"

    - name: "Deploy on OCP"
      include_role:
        name: deploy_olm_operator_openshift_upstream
